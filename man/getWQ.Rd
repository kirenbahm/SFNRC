% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dfe_wq.R
\name{getWQ}
\alias{getWQ}
\title{DataForEver water quality database API}
\usage{
getWQ(stns, target_analytes = "all", 
matricesToExclude = "analyte_free_water",
output_colNames = c("stn", "date", "time", "param", "units", 
"matrix", "mdl", "value"),
output_colClasses = c("character", "character", "character", 
"character", "character", "character", "numeric", "numeric"),
rFriendlyParamNames = FALSE)
}
\arguments{
\item{stns}{a single-column dataframe of DataForEver station names. Case insensitive.}

\item{target_analytes}{grep-style character vector naming analytes of interest. default is "all". e.g., # target_analytes <- c("PHOSPHATE|NITROGEN|AMMONI|SUSPENDED|DISSOLVED OXYGEN|CALCIUM|POTASSIUM|HARDNESS|SODIUM|CHLORIDE|TEMP|CONDUCTIVITY, FIELD|SILICA|LEAD, TOTAL|MAGNESIUM|TURBIDITY|CHLOROPHYLL|MERCURY, TOTAL|SULFATE|ZINC, TOTAL|CHLORDANE|MALATHION|CARBOPHENOTHION|PH, FIELD")}

\item{matricesToExclude}{character vector specifying any sample matrices to be excluded. Spelling/case must be a perfect match to DataForEver entries. For example, "analyte_free_water" indicates field blanks. Advisible to check output using, e.g., \code{unique(wqDat$matrix)}}

\item{output_colNames}{names of columns in output (changing this is not recommended; this argument is more of a placeholder)}

\item{output_colClasses}{classes of columns in output (changing this is not recommended; this argument is more of a placeholder)}

\item{rFriendlyParamNames}{TRUE/FALSE; indicates whether parameter names should be modified to be R-friendly (no special characters, commas, or spaces). Advisable for analysis, as this makes analysis easier and pre-empts changes coerced by, e.g., \code{plyr::ddply}}
}
\value{
dataframe \code{getWQ} returns a dataframe with water quality measurements from each station identified in \code{stns}.
}
\description{
Downloads and compiles DataForEver water quality data. This function Works only on linux machines on the SFNRC network with access to the opt/physical drive. Code issues system commands, runs shell scripts, and modifies files in a temp folder on the local hard drive.
}
\examples{

\dontrun{
head(getWQ(stns = stations, target_analytes = c("PHOSPHATE|NITROGEN|AMMONI")))

# to convert data from long to wide:
stations <- c("S333", "S12A", "S12B", "S12C", "S12D")
targParams    <- c("PHOSPHATE, TOTAL AS P", "TURBIDITY")

wideDat  <- stats::reshape(wqDat[(wqDat$stn \%in\% stations) & (wqDat$param \%in\% targParams), ],
     idvar = c("stn", "date", "year", "mo", "day", "time", "datetime"),
     timevar = "param", direction = "wide")
# clean up the names
names(wideDat) <- gsub(x = names(wideDat), pattern = "value.| |,", replacement = "")





### download a bunch of data:
targetStns <- c("S21A", "S21", "S22", "S25", "S25A", 
"S25B", "S26", "S27", "S28", 
"G58", "S700", "G93", "S123", "S197", "S333", 
"S12A", "S12B", "S12C", "S12D", "S151")

wq.df <- getWQ(stns = targetStns)
}

}
\seealso{
\code{\link{getHydro}}
}
